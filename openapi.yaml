openapi: 3.1.0
info:
  title: Cimeika Core API
  version: "0.1.0"
  description: "Базовий FastAPI-сервіс для Cimeika."
servers:
  - url: "/"
paths:
  /:
    get:
      summary: Статус ядра
      tags: [system]
      responses:
        "200":
          description: OK

  /health:
    get:
      summary: Healthcheck
      tags: [system]
      responses:
        "200":
          description: OK

  /ci:
    get:
      summary: Статус модуля Ci
      tags: [ci]
      responses:
        "200":
          description: OK

  /kazkar:
    get:
      summary: Статус модуля Казкар
      tags: [kazkar]
      responses:
        "200":
          description: OK

  /malya:
    get:
      summary: Статус модуля Маля
      tags: [malya]
      responses:
        "200":
          description: OK

  /nastrij:
    get:
      summary: Статус модуля Настрій
      tags: [nastrij]
      responses:
        "200":
          description: OK

  /podia:
    get:
      summary: Статус модуля ПоДія
      tags: [podia]
      responses:
        "200":
          description: OK

  /gallery:
    get:
      summary: Статус модуля Галерея
      tags: [gallery]
      responses:
        "200":
          description: OK

  /calendar:
    get:
      summary: Статус модуля Календар
      tags: [calendar]
      responses:
        "200":
          description: OK

  /api/chat:
    post:
      summary: Базовий чат (echo)
      tags: [chat]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatRequest"
      responses:
        "200":
          description: Відповідь чату
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatResponse"

components:
  schemas:
    ChatMessage:
      type: object
      properties:
        role:
          type: string
        content:
          type: string
      required: [role, content]

    ChatRequest:
      type: object
      properties:
        persona:
          type: string
          default: "ci"
        messages:
          type: array
          items:
            $ref: "#/components/schemas/ChatMessage"
      required: [persona, messages]

    ChatResponse:
      type: object
      properties:
        persona:
          type: string
        mode:
          type: string
        reply:
          type: string
        last_user:
          type: string
          nullable: true
      required: [persona, mode, reply]
